import{_ as i,c as a,o as l,ae as n}from"./chunks/framework.Dh1jimFm.js";const g=JSON.parse('{"title":"设计模式-总览","description":"","frontmatter":{},"headers":[],"relativePath":"article/设计模式/总览.md","filePath":"article/设计模式/总览.md","lastUpdated":1743862747000}'),h={name:"article/设计模式/总览.md"};function t(e,s,k,p,r,E){return l(),a("div",null,s[0]||(s[0]=[n(`<h1 id="设计模式-总览" tabindex="-1">设计模式-总览 <a class="header-anchor" href="#设计模式-总览" aria-label="Permalink to &quot;设计模式-总览&quot;">​</a></h1><p>【参考】 <a href="https://coding.imooc.com/learn/list/255.html" target="_blank" rel="noreferrer">慕课网-Javascript 设计模式系统讲解与应用</a></p><h2 id="一、导学" tabindex="-1">一、导学 <a class="header-anchor" href="#一、导学" aria-label="Permalink to &quot;一、导学&quot;">​</a></h2><h3 id="论工程师的设计能力" tabindex="-1">论工程师的设计能力 <a class="header-anchor" href="#论工程师的设计能力" aria-label="Permalink to &quot;论工程师的设计能力&quot;">​</a></h3><ul><li>3年工作经验，面试必考设计能力</li><li>成为项目技术负责人，设计能力是必要基础</li><li>从写好代码，到做好设计，设计模式是必经之路</li></ul><h3 id="前端学习设计模式的困惑" tabindex="-1">前端学习设计模式的困惑 <a class="header-anchor" href="#前端学习设计模式的困惑" aria-label="Permalink to &quot;前端学习设计模式的困惑&quot;">​</a></h3><ul><li>网上的资料都是针对 Java 等后端语言的</li><li>看懂概念，但是不知道怎么用，看完就忘</li><li>现在的 JS 框架如vue、react封装的很完善，基本接触不到到底都用了哪些设计模式</li></ul><h3 id="课程概述" tabindex="-1">课程概述 <a class="header-anchor" href="#课程概述" aria-label="Permalink to &quot;课程概述&quot;">​</a></h3><ul><li>做什么？—— 讲解JS设计模式</li><li>哪些部分？ —— 面向对象、设计原则、设计模式</li><li>技术？ —— 面向对象，UML类图，ES6</li></ul><h3 id="知识点介绍" tabindex="-1">知识点介绍 <a class="header-anchor" href="#知识点介绍" aria-label="Permalink to &quot;知识点介绍&quot;">​</a></h3><ul><li>面向对象：ES class语法、三要素、UML类图</li><li>设计原则：何为设计、5大设计原则、从设计到模式</li><li>设计模式：分优先级讲解、结合核心技术、结合框架应用</li><li>综合示例：设计方案、代码演示、设计模式对应关系的分析</li></ul><h3 id="课程安排" tabindex="-1">课程安排 <a class="header-anchor" href="#课程安排" aria-label="Permalink to &quot;课程安排&quot;">​</a></h3><h4 id="_1、面向对象" tabindex="-1">1、面向对象 <a class="header-anchor" href="#_1、面向对象" aria-label="Permalink to &quot;1、面向对象&quot;">​</a></h4><ul><li>使用 webpack 和 babel 搭建ES6编译环境</li><li>ES6 class 面向对象的语法</li><li>面向对象三要素：继承 封装 多态</li></ul><h4 id="_2、设计原则" tabindex="-1">2、设计原则 <a class="header-anchor" href="#_2、设计原则" aria-label="Permalink to &quot;2、设计原则&quot;">​</a></h4><ul><li>通过 《Linux/Unix设计哲学》理解何为设计</li><li>5大设计原则分析和理解，以及代码演示</li><li>设计模式 -&gt; 从设计到模式</li></ul><h4 id="_3、设计模式" tabindex="-1">3、设计模式 <a class="header-anchor" href="#_3、设计模式" aria-label="Permalink to &quot;3、设计模式&quot;">​</a></h4><ul><li>概述：创建型、结构型、行为型</li><li>常用设计模式，详细讲解，结合经典使用场景</li><li>非常用设计模式，理解概念，示例演示</li><li>有主有次，掌握重点</li></ul><h4 id="_4、综合示例" tabindex="-1">4、综合示例 <a class="header-anchor" href="#_4、综合示例" aria-label="Permalink to &quot;4、综合示例&quot;">​</a></h4><ul><li>用jQuery实现一个简单的购物车</li><li>设计分析，画UML类图</li><li>代码演示</li><li>总结使用的7种设计模式</li></ul><h3 id="讲授方式" tabindex="-1">讲授方式 <a class="header-anchor" href="#讲授方式" aria-label="Permalink to &quot;讲授方式&quot;">​</a></h3><ul><li>先基础后实践，先设计后模式</li><li>重点、常用的设计模式，配合经典使用场景</li><li>综合示例，演示设计模式如何使用</li><li>用JS的方式讲解面向对象和设计模式</li></ul><h3 id="课程收获" tabindex="-1">课程收获 <a class="header-anchor" href="#课程收获" aria-label="Permalink to &quot;课程收获&quot;">​</a></h3><ul><li>面向对象思想，UML类图</li><li>5大设计原则，23种设计模式</li><li>能应对前端面试中相关的面试题</li><li>提升个人的设计能力</li></ul><h3 id="学习前提" tabindex="-1">学习前提 <a class="header-anchor" href="#学习前提" aria-label="Permalink to &quot;学习前提&quot;">​</a></h3><ul><li>了解面向对象，能熟练使用jQuery或类似工具库</li><li>有ES6语法基础，用过nodejs和npm环境</li><li>了解vue和react（至少看过文档，做过demo）</li></ul><h3 id="重点提示" tabindex="-1">重点提示 <a class="header-anchor" href="#重点提示" aria-label="Permalink to &quot;重点提示&quot;">​</a></h3><ul><li>本课讲解设计模式，不是实战项目也不是源码分析</li><li>23种设计模式不是都常用，分清主次</li><li>设计模式在JS和Java中的讲解方式有区别</li><li>不适合刚入门编程的同学，参考上文的学习前提</li></ul><h2 id="二、面向对象" tabindex="-1">二、面向对象 <a class="header-anchor" href="#二、面向对象" aria-label="Permalink to &quot;二、面向对象&quot;">​</a></h2><h3 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h3><ul><li>类</li><li>对象（实例）</li></ul><h3 id="三要素" tabindex="-1">三要素 <a class="header-anchor" href="#三要素" aria-label="Permalink to &quot;三要素&quot;">​</a></h3><ul><li>继承：子类继承父类</li><li>封装：数据的权限和保密</li><li>多态：同一接口不同实现</li></ul><h4 id="继承" tabindex="-1">继承 <a class="header-anchor" href="#继承" aria-label="Permalink to &quot;继承&quot;">​</a></h4><blockquote><p>作用：继承可以将公共方法抽离出来，提高复用，减少冗余</p></blockquote><h4 id="封装" tabindex="-1">封装 <a class="header-anchor" href="#封装" aria-label="Permalink to &quot;封装&quot;">​</a></h4><ul><li>public完全开放</li><li>protected对子类开放</li><li>private对自己开放</li></ul><blockquote><p>作用：减少耦合，不该外漏的不外漏，利于数据、接口的权限管理 （ES6目前不支持，可使用TS实践）</p></blockquote><h4 id="多态" tabindex="-1">多态 <a class="header-anchor" href="#多态" aria-label="Permalink to &quot;多态&quot;">​</a></h4><blockquote><p>作用：保持子类的开放性和灵活性，面相接口编程</p></blockquote><p><em>JS使用极少，了解即可</em></p><h3 id="为何使用面向对象" tabindex="-1">为何使用面向对象？ <a class="header-anchor" href="#为何使用面向对象" aria-label="Permalink to &quot;为何使用面向对象？&quot;">​</a></h3><blockquote><p>原因：<strong>结构化</strong>的事务容易管理</p></blockquote><ul><li>程序结构化：顺序、分支、循环</li><li><strong>数据结构化</strong>：面相对象</li></ul><h3 id="uml类图" tabindex="-1">UML类图 <a class="header-anchor" href="#uml类图" aria-label="Permalink to &quot;UML类图&quot;">​</a></h3><blockquote><p>UML：Unified Modeling Language 统一建模语言</p></blockquote><ul><li><p>UML 包含很多的图，类图是其中一个</p></li><li><p>关系、泛化、关联</p></li></ul><h2 id="三、设计原则" tabindex="-1">三、设计原则 <a class="header-anchor" href="#三、设计原则" aria-label="Permalink to &quot;三、设计原则&quot;">​</a></h2><h3 id="何为设计" tabindex="-1">何为设计？ <a class="header-anchor" href="#何为设计" aria-label="Permalink to &quot;何为设计？&quot;">​</a></h3><ul><li>描述 <ul><li><strong>按照哪一种思路或者标准来实现功能</strong></li><li>功能相同，可以有不同设计方案来实现</li><li>伴随着需求增加，设计的作用才能体现出来</li></ul></li><li>《Unix/Linux设计哲学》 <ul><li>准则1：小即是美</li><li>准则2：让每个程序员只做一件事</li><li>准则3：快速建立原型</li><li>准则4：舍弃高效率而取可移植性</li><li>准则5：采用纯文本来存储数据</li><li>准则6：充分利用软件的杠杆效应（复用）</li><li>准则7：使用shell脚本来提高杠杆效应和可移植性</li><li>准则8：避免强制性的用户界面</li><li>准则9：让每个程序都成为过滤器</li><li>小准则：允许用户定制环境</li><li>小准则：尽量使操作系统内核小而轻量化</li><li>小准则：使用小写字母并尽量简写</li><li>小准则：沉默是金（异常时不输出）</li><li>小准则：各部分之和大于整体</li><li>小准则：寻求90%的解决方案</li></ul></li></ul><h3 id="五大设计原则" tabindex="-1">五大设计原则 <a class="header-anchor" href="#五大设计原则" aria-label="Permalink to &quot;五大设计原则&quot;">​</a></h3><p>SOLID五大设计原则</p><ul><li><strong>S - 单一职责原则</strong></li><li><strong>O - 开放封闭原则</strong></li><li>L - 李氏置换原则</li><li>I - 接口独立原则</li><li>D - 依赖倒置原则</li></ul><h4 id="s-单一职责原则" tabindex="-1">S-单一职责原则 <a class="header-anchor" href="#s-单一职责原则" aria-label="Permalink to &quot;S-单一职责原则&quot;">​</a></h4><p>描述：</p><ul><li><strong>一个程序只做好一件事</strong></li><li>如果功能过于复杂就拆分开，每个部分保持独立</li></ul><h4 id="o-开放封闭原则" tabindex="-1">O-开放封闭原则 <a class="header-anchor" href="#o-开放封闭原则" aria-label="Permalink to &quot;O-开放封闭原则&quot;">​</a></h4><p>描述：</p><ul><li><strong>对扩展开放，对修改封闭</strong></li><li>增加需求时，扩展新代码，而非修改已有代码</li><li>这是软件设计的终极目标</li></ul><h4 id="l-李氏置换原则" tabindex="-1">L-李氏置换原则 <a class="header-anchor" href="#l-李氏置换原则" aria-label="Permalink to &quot;L-李氏置换原则&quot;">​</a></h4><ul><li><strong>子类能覆盖父类</strong></li><li>父类能出现的地方子类就能出现</li><li>JS中使用较少（弱类型&amp;继承使用较少）</li></ul><h4 id="i-接口独立原则" tabindex="-1">I-接口独立原则 <a class="header-anchor" href="#i-接口独立原则" aria-label="Permalink to &quot;I-接口独立原则&quot;">​</a></h4><ul><li><strong>保持接口的单一独立，避免出现“胖接口”</strong></li><li>JS中没有接口（TS例外），使用较少</li><li>类似于单一职责原则，这里更关注接口</li></ul><h4 id="d-依赖倒置原则" tabindex="-1">D-依赖倒置原则 <a class="header-anchor" href="#d-依赖倒置原则" aria-label="Permalink to &quot;D-依赖倒置原则&quot;">​</a></h4><ul><li><strong>面相接口编程，依赖于抽象而不依赖与具体</strong></li><li><strong>使用方只关注接口而不关注具体类的实现</strong></li><li>JS中使用较少（没有接口&amp;弱类型）</li></ul><h4 id="设计原则总结" tabindex="-1">设计原则总结 <a class="header-anchor" href="#设计原则总结" aria-label="Permalink to &quot;设计原则总结&quot;">​</a></h4><ul><li>S O 体现较多，详细介绍</li><li>L I D 体现较少，但是要了解其用意</li></ul><h3 id="从设计到模式" tabindex="-1">从设计到模式 <a class="header-anchor" href="#从设计到模式" aria-label="Permalink to &quot;从设计到模式&quot;">​</a></h3><ul><li>设计</li><li>模式</li><li>分开</li><li>从设计到模式</li></ul><h3 id="_23种设计模式" tabindex="-1">23种设计模式 <a class="header-anchor" href="#_23种设计模式" aria-label="Permalink to &quot;23种设计模式&quot;">​</a></h3><ul><li>创建型 <ul><li><strong>工厂模式</strong>（工厂方法模式，抽象工厂模式，建造者模式）</li><li><strong>单例模式</strong></li><li><strong>原型模式</strong></li></ul></li><li>组合型 <ul><li><strong>适配器模式</strong></li><li>装饰器模式</li><li><strong>代理模式</strong></li><li>外观模式</li><li><em>桥接模式</em></li><li><em>组合模式</em></li><li><em>享元模式</em></li></ul></li><li>行为型 <ul><li>策略模式</li><li>模板方法模式</li><li><strong>观察者模式</strong></li><li><strong>迭代器模式</strong></li><li>职责链模式</li><li>命令模式</li><li>备忘录模式</li><li>状态模式(状态机)</li><li>访问者模式</li><li>中介者模式</li><li>解释器模式</li></ul></li></ul><h3 id="如何学习设计模式" tabindex="-1">如何学习设计模式？ <a class="header-anchor" href="#如何学习设计模式" aria-label="Permalink to &quot;如何学习设计模式？&quot;">​</a></h3><ul><li>明白每个设计模式的道理和用意</li><li>通过经典应用体会它的真正使用场景</li><li>自己编码时多思考，尽量模仿（刻意训练）</li></ul><h2 id="四、工厂模式" tabindex="-1">四、工厂模式 <a class="header-anchor" href="#四、工厂模式" aria-label="Permalink to &quot;四、工厂模式&quot;">​</a></h2><h3 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><blockquote><p>将new操作单独封装，遇到new时，就要考虑是否该使用工厂模式</p></blockquote><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>购买汉堡，直接点餐、取餐，不会自己亲手做；</li><li>商店要封装做汉堡的工作，做好直接给消费者</li></ul><h3 id="场景" tabindex="-1">场景 <a class="header-anchor" href="#场景" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>jQuery，<code>$(&#39;div&#39;)</code>，支持链式操作，将jQuery名字封装起来</li><li>React.createElement 创建vnode</li></ul><h3 id="阅读源码的意义" tabindex="-1">阅读源码的意义 <a class="header-anchor" href="#阅读源码的意义" aria-label="Permalink to &quot;阅读源码的意义&quot;">​</a></h3><ul><li>学习功能实现</li><li>学习设计思路</li><li>强制自己写代码，模拟刻意训练</li><li>自己写出优秀的代码</li></ul><h3 id="jquery" tabindex="-1">jQuery <a class="header-anchor" href="#jquery" aria-label="Permalink to &quot;jQuery&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="react-createelement" tabindex="-1">React.createElement <a class="header-anchor" href="#react-createelement" aria-label="Permalink to &quot;React.createElement&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vnode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 省略内部代码...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attrs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vnode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag, attrs, children)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="vue异步组件" tabindex="-1">Vue异步组件 <a class="header-anchor" href="#vue异步组件" aria-label="Permalink to &quot;Vue异步组件&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;async-example&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;div&gt;I am async!&lt;/div&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="设计原则验证" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>构造函数和创建者分离</li><li>符合开放封闭原则</li></ul><h2 id="五、单例模式" tabindex="-1">五、单例模式 <a class="header-anchor" href="#五、单例模式" aria-label="Permalink to &quot;五、单例模式&quot;">​</a></h2><h3 id="介绍-1" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-1" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><blockquote><p>一个类只有一个实例</p></blockquote><h3 id="示例-1" tabindex="-1">示例 <a class="header-anchor" href="#示例-1" aria-label="Permalink to &quot;示例&quot;">​</a></h3><p>登录框、购物车</p><h3 id="代码演示" tabindex="-1">代码演示 <a class="header-anchor" href="#代码演示" aria-label="Permalink to &quot;代码演示&quot;">​</a></h3><p>Java使用单例模式</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// private约束不能在外部使用构造函数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SignleObject instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleObject </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 只new一次</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;login...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>JS使用单例模式（靠文档注释约束）</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;login...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SingleObject.getInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 测试：注意这里只能使用静态函数 getInstance，不能 new SingleObject()!!!</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj2)</span></span></code></pre></div><h3 id="场景-1" tabindex="-1">场景 <a class="header-anchor" href="#场景-1" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>jQuery只有一个$</li><li>模拟登录框（购物车）</li><li>vuex 和 redux 中的 store</li></ul><h4 id="jquery只有一个" tabindex="-1">jQuery只有一个$ <a class="header-anchor" href="#jquery只有一个" aria-label="Permalink to &quot;jQuery只有一个$&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (window.jQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.jQuery</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 初始化...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="设计原则验证-1" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-1" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>符合单一职责原则，只实例化唯一的对象</li></ul><h2 id="六、适配器模式" tabindex="-1">六、适配器模式 <a class="header-anchor" href="#六、适配器模式" aria-label="Permalink to &quot;六、适配器模式&quot;">​</a></h2><h3 id="介绍-2" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-2" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><blockquote><p>旧接口格式和使用者不兼容，中间加一个适配转换接口</p></blockquote><h3 id="示例-2" tabindex="-1">示例 <a class="header-anchor" href="#示例-2" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>插头转接口</li><li>client -&gt; target(adapter)</li></ul><h3 id="场景-2" tabindex="-1">场景 <a class="header-anchor" href="#场景-2" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>封装旧接口</li><li><strong>vue 的 computed</strong></li></ul><h3 id="设计原则验证-2" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-2" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>将旧接口和使用者进行分离</li><li>符合开放封闭原则</li></ul><h2 id="七、装饰器模式" tabindex="-1">七、装饰器模式 <a class="header-anchor" href="#七、装饰器模式" aria-label="Permalink to &quot;七、装饰器模式&quot;">​</a></h2><h3 id="介绍-3" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-3" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><blockquote><p>为对象添加新功能，不改变其原有的结构和功能</p></blockquote><h3 id="示例-3" tabindex="-1">示例 <a class="header-anchor" href="#示例-3" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>手机壳</li></ul><h3 id="url类图和代码演示" tabindex="-1">URL类图和代码演示 <a class="header-anchor" href="#url类图和代码演示" aria-label="Permalink to &quot;URL类图和代码演示&quot;">​</a></h3><h3 id="场景-es7-装饰器" tabindex="-1">场景 ES7 装饰器 <a class="header-anchor" href="#场景-es7-装饰器" aria-label="Permalink to &quot;场景 ES7 装饰器&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 装饰器的原理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">**/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@decorator</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 等同于</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decorator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="场景-core-decorators第三方库" tabindex="-1">场景 core-decorators第三方库 <a class="header-anchor" href="#场景-core-decorators第三方库" aria-label="Permalink to &quot;场景 core-decorators第三方库&quot;">​</a></h3><ul><li>第三方开源lib</li><li>提供常用的装饰器</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { deprecate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;core-decorators&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deprecate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;即将废弃&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;www.baidu.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Aaron&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="设计原则验证-3" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-3" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>将现有对象和装饰器进行分离，两者独立存在，符合开放封闭原则</li></ul><h2 id="八、代理模式" tabindex="-1">八、代理模式 <a class="header-anchor" href="#八、代理模式" aria-label="Permalink to &quot;八、代理模式&quot;">​</a></h2><h3 id="介绍-4" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-4" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><ul><li>使用者无权访问目标对象</li><li>中间加代理，通过代理做授权和控制</li><li>用户 - 代理对象 - 目标对象</li></ul><h3 id="示例-4" tabindex="-1">示例 <a class="header-anchor" href="#示例-4" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>科学上网</li><li>明星经纪人</li></ul><h3 id="传统uml类图-演示" tabindex="-1">传统UML类图&amp;演示 <a class="header-anchor" href="#传统uml类图-演示" aria-label="Permalink to &quot;传统UML类图&amp;演示&quot;">​</a></h3><p>Client（proxyImg） -&gt; ProxyImg（realImg/display） -&gt; RealImg（fileName/display）</p><h3 id="场景-3" tabindex="-1">场景 <a class="header-anchor" href="#场景-3" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>网页事件代理</li><li>jQuery $.proxy</li><li>ES6 Proxy</li></ul><h3 id="网页事件代理" tabindex="-1">网页事件代理 <a class="header-anchor" href="#网页事件代理" aria-label="Permalink to &quot;网页事件代理&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> div1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;div1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.target</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (target.nodeName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target.innerHTML)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="proxy" tabindex="-1">$.proxy <a class="header-anchor" href="#proxy" aria-label="Permalink to &quot;$.proxy&quot;">​</a></h3><h3 id="es6-proxy" tabindex="-1">ES6 Proxy <a class="header-anchor" href="#es6-proxy" aria-label="Permalink to &quot;ES6 Proxy&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 明星</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> star </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Aaron&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  phone: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;star_1381809xxxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 经纪人</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(star, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;phone&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 返回经纪人自己的手机号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;agent_13800000000&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;price&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 明星不保价，经纪人报价</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;报价_120000&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target[key]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;customPrice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;价格太低&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> val</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(agent.name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(agent.age)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(agent.phone)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(agent.price)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent.customPrice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;agent.customPrice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, agent.customPrice)</span></span></code></pre></div><h3 id="设计原则验证-4" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-4" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>代理类和目标类分离，隔离开目标类和使用者</li><li>符合开放封闭原则</li></ul><h3 id="代理模式-vs-适配器模式" tabindex="-1">代理模式 vs 适配器模式 <a class="header-anchor" href="#代理模式-vs-适配器模式" aria-label="Permalink to &quot;代理模式 vs 适配器模式&quot;">​</a></h3><ul><li>适配器模式：提供一个不同的接口（如不同版本的插头）</li><li>代理模式：提供一模一样的接口</li></ul><h3 id="代理模式-vs-装饰器模式" tabindex="-1">代理模式 vs 装饰器模式 <a class="header-anchor" href="#代理模式-vs-装饰器模式" aria-label="Permalink to &quot;代理模式 vs 装饰器模式&quot;">​</a></h3><ul><li>装饰器模式：扩展功能，原有功能不变且可直接使用</li><li>代理模式：显示原有功能，但是经过限制或者阉割之后的</li></ul><h3 id="示例对比" tabindex="-1">示例对比 <a class="header-anchor" href="#示例对比" aria-label="Permalink to &quot;示例对比&quot;">​</a></h3><ul><li><strong>代理模式 —— 经纪人</strong></li><li><strong>适配器模式 —— 插头转换器</strong></li><li><strong>装饰器模式 ——手机壳</strong></li></ul><h2 id="九、外观模式" tabindex="-1">九、外观模式 <a class="header-anchor" href="#九、外观模式" aria-label="Permalink to &quot;九、外观模式&quot;">​</a></h2><h3 id="介绍-5" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-5" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><blockquote><p>为子系统中的一组接口提供了一个高层接口，使用者使用这个高层接口</p></blockquote><h3 id="示例-5" tabindex="-1">示例 <a class="header-anchor" href="#示例-5" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>去医院看病，接待员去挂号、缴费、看诊、取药</li></ul><h3 id="uml类图-1" tabindex="-1">UML类图 <a class="header-anchor" href="#uml类图-1" aria-label="Permalink to &quot;UML类图&quot;">​</a></h3><p>Client -&gt; Facade -&gt; (SubSystemA/SubSystemB/SubSystemC)</p><h2 id="十、观察者模式" tabindex="-1">十、观察者模式 <a class="header-anchor" href="#十、观察者模式" aria-label="Permalink to &quot;十、观察者模式&quot;">​</a></h2><h3 id="介绍-6" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-6" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><ul><li>发布 &amp; 订阅</li><li>支持一对多</li></ul><h3 id="示例-6" tabindex="-1">示例 <a class="header-anchor" href="#示例-6" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>订报纸、订牛奶</li></ul><h3 id="uml类图-2" tabindex="-1">UML类图 <a class="header-anchor" href="#uml类图-2" aria-label="Permalink to &quot;UML类图&quot;">​</a></h3><h3 id="代码演示-1" tabindex="-1">代码演示 <a class="header-anchor" href="#代码演示-1" aria-label="Permalink to &quot;代码演示&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Subject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.observers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notifyAllObservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  notifyAllObservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.observers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  attach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.observers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(observer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">subject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.subject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subject</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.subject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} update, state: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subject</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 测试</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Subject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;o1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;o2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;o3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="场景-4" tabindex="-1">场景 <a class="header-anchor" href="#场景-4" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li><strong>网页事件绑定</strong></li><li><strong>Promise</strong>（pending状态变化为fulfilled时，调用resolved处理函数）</li><li>nodejs自定义事件（底层eventEmitter、api如fs.createReadSteam）</li><li>nodejs处理http请求</li><li><strong>vue react 组件生命周期触发</strong></li><li><strong>vue watch 实现</strong></li></ul><h3 id="设计原则验证-5" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-5" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>主题和观察者分离，不是主动触发而是被动监听，两者解耦</li><li>符合开放封闭原则</li></ul><h2 id="十一、迭代器模式" tabindex="-1">十一、迭代器模式 <a class="header-anchor" href="#十一、迭代器模式" aria-label="Permalink to &quot;十一、迭代器模式&quot;">​</a></h2><h3 id="介绍-7" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-7" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><ul><li><strong>顺序访问一个有序集合（非对象）</strong></li><li><strong>使用者无需知道集合的内部结构（封装）</strong></li></ul><h3 id="示例-7" tabindex="-1">示例 <a class="header-anchor" href="#示例-7" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>Array.prototype.forEach</li><li>for语句</li><li>$.each()</li></ul><h3 id="uml类图-3" tabindex="-1">UML类图 <a class="header-anchor" href="#uml类图-3" aria-label="Permalink to &quot;UML类图&quot;">​</a></h3><h3 id="演示" tabindex="-1">演示 <a class="header-anchor" href="#演示" aria-label="Permalink to &quot;演示&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> container.list</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> container </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> container.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getIterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="场景-5" tabindex="-1">场景 <a class="header-anchor" href="#场景-5" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>jQuery each</li><li>ES6 Iterator</li></ul><h4 id="es6-iterator为何存在" tabindex="-1">ES6 Iterator为何存在？ <a class="header-anchor" href="#es6-iterator为何存在" aria-label="Permalink to &quot;ES6 Iterator为何存在？&quot;">​</a></h4><ul><li><strong>ES6 语法中，有序集合的数据类型已经有很多</strong></li><li><strong>Array Map Set String TypedArray arguments NodeList</strong></li><li><strong>需要有一个统一的遍历接口来遍历所有数据类型</strong></li><li>注意：Object不是有序集合，可以用Map代替</li></ul><h4 id="es6-iterator是什么" tabindex="-1">ES6 Iterator是什么 <a class="header-anchor" href="#es6-iterator是什么" aria-label="Permalink to &quot;ES6 Iterator是什么&quot;">​</a></h4><ul><li>以上数据类型，都有 <code>[Symbol.iterator]</code> 属性</li><li>属性值是函数，执行函数返回一个迭代器</li><li>这个迭代器就有 next 方法可顺序迭代子元素</li><li>可运行 <code>Array.prototype[Symbol.iterator]</code> 来测试</li></ul><h4 id="es6-iterator实例" tabindex="-1">ES6 Iterator实例 <a class="header-anchor" href="#es6-iterator实例" aria-label="Permalink to &quot;ES6 Iterator实例&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`Symbol.iterator\` 并不是人人都知道，也不是每个人都需要封装一个each方法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 因此有了 \`for...of\` 语法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 带有遍历器特性的对象：data[Symbol.iterator] 有值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // for (let item of data) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //  console.log(item)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[Symbol.iterator]()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // console.log(iterator.next())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // console.log(iterator.next())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {done: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.done) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.done) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nodeList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementsByTagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;p&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nodeList)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m)</span></span></code></pre></div><h3 id="设计原则验证-6" tabindex="-1">设计原则验证 <a class="header-anchor" href="#设计原则验证-6" aria-label="Permalink to &quot;设计原则验证&quot;">​</a></h3><ul><li>迭代器对象和目标对象分离</li><li>迭代器将使用者与目标对象隔离开</li><li>符合开放封闭原则</li></ul><h2 id="十二、状态模式" tabindex="-1">十二、状态模式 <a class="header-anchor" href="#十二、状态模式" aria-label="Permalink to &quot;十二、状态模式&quot;">​</a></h2><h3 id="介绍-8" tabindex="-1">介绍 <a class="header-anchor" href="#介绍-8" aria-label="Permalink to &quot;介绍&quot;">​</a></h3><ul><li>一个对象有状态变化</li><li>每次状态变化都会触发一个逻辑</li><li>不能总是用 if...else 来控制</li></ul><h3 id="示例-8" tabindex="-1">示例 <a class="header-anchor" href="#示例-8" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li>交通信号灯不同颜色的变化</li></ul><h3 id="uml类图-4" tabindex="-1">UML类图 <a class="header-anchor" href="#uml类图-4" aria-label="Permalink to &quot;UML类图&quot;">​</a></h3><p>State &lt;-- Context</p><h3 id="场景-6" tabindex="-1">场景 <a class="header-anchor" href="#场景-6" aria-label="Permalink to &quot;场景&quot;">​</a></h3><ul><li>有限状态机</li><li>promise</li></ul><h2 id="十三、其他设计模式" tabindex="-1">十三、其他设计模式 <a class="header-anchor" href="#十三、其他设计模式" aria-label="Permalink to &quot;十三、其他设计模式&quot;">​</a></h2><h3 id="原型模式" tabindex="-1">原型模式 <a class="header-anchor" href="#原型模式" aria-label="Permalink to &quot;原型模式&quot;">​</a></h3><ul><li>介绍：clone自己</li><li>场景：Object.create</li></ul><h3 id="桥接模式" tabindex="-1">桥接模式 <a class="header-anchor" href="#桥接模式" aria-label="Permalink to &quot;桥接模式&quot;">​</a></h3><ul><li>介绍：用于把抽象化与实现化解耦，使得二者能够独立变化</li><li>场景：Canvas绘图</li></ul><h2 id="面试相关-重要" tabindex="-1">面试相关（重要） <a class="header-anchor" href="#面试相关-重要" aria-label="Permalink to &quot;面试相关（重要）&quot;">​</a></h2><blockquote><p>能说出课程重点讲解的设计模式即可</p></blockquote><p>设计模式：</p><ul><li>设计 =&gt; 模式</li><li>5大设计原则 SOLID <ul><li><strong>S</strong>ingle <strong>单一职责原则</strong></li><li><strong>O</strong>pen-Close <strong>开放封闭原则</strong></li><li><strong>L</strong>ee 里氏替换原则</li><li><strong>I</strong>nterface 接口独立原则</li><li><strong>D</strong>ependence 依赖倒置原则</li></ul></li><li>23个设计模式 <ul><li>创建型</li><li>组合型</li><li>行为型</li></ul></li><li>前端常见设计模式 <ul><li><strong>工厂模式</strong><ul><li>jQuery，<code>$(&#39;div&#39;)</code>，支持链式操作，将jQuery名字封装起来</li><li>React.createElement 创建vnode</li></ul></li><li><strong>单例模式</strong><ul><li>jQuery只有一个$</li><li>模拟登录框（购物车）</li><li>vuex 和 redux 中的 store</li></ul></li><li><strong>原型模式</strong><ul><li>JS 的 Object.create</li></ul></li><li><strong>适配器模式</strong><ul><li>vue 的 computed</li></ul></li><li><strong>代理模式</strong><ul><li>ES6 Proxy</li></ul></li><li><strong>观察者模式</strong><ul><li>网页事件绑定</li><li>Promise（pending状态变化为fulfilled时，调用resolved处理函数）（状态模式）</li><li>vue watch 实现</li></ul></li><li><strong>迭代器模式</strong><ul><li>ES6 Iterator（<code>[Symbol.iterator]</code> 属性）</li><li>ES6 Iterator为何存在？ <ul><li><strong>ES6 语法中，有序集合的数据类型已经有很多</strong></li><li><strong>Array Map Set String TypedArray arguments NodeList</strong></li><li><strong>需要有一个统一的遍历接口来遍历所有数据类型</strong></li><li>注意：Object不是有序集合，可以用Map代替</li></ul></li><li>ES6 Iterator是什么 <ul><li>以上数据类型，都有 <code>[Symbol.iterator]</code> 属性</li><li>属性值是函数，执行函数返回一个迭代器</li><li>这个迭代器就有 next 方法可顺序迭代子元素</li><li>可运行 <code>Array.prototype[Symbol.iterator]</code> 来测试</li></ul></li></ul></li><li>观察者模式和发布订阅模式的区别 <ul><li>观察者模式中，Subject 和 Observer直接绑定，没有中间媒介，如 addEventListener 绑定事件</li><li>发布订阅模式中，Publisher 和 Observer 互不相识，需要中间媒介 Event channel，如 EventBus 自定义事件</li></ul></li></ul></li></ul><h2 id="日常使用" tabindex="-1">日常使用 <a class="header-anchor" href="#日常使用" aria-label="Permalink to &quot;日常使用&quot;">​</a></h2><ul><li>重点讲解的设计模式，要强制自己模仿、掌握</li><li>非常用的设计模式，视业务场景选择性使用</li></ul><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://juejin.cn/post/6844904138707337229" target="_blank" rel="noreferrer">前端中的设计模式</a></li><li><a href="https://zxpsuper.github.io/advanced_front_end/design_patterns/%E5%89%8D%E8%A8%80.html#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" target="_blank" rel="noreferrer">前端进阶小书-设计模式</a></li><li><a href="https://github.com/ziyi2/js/blob/master/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noreferrer">ziyi2-设计模式</a></li></ul>`,209)]))}const o=i(h,[["render",t]]);export{g as __pageData,o as default};
