import{_ as i,c as a,o as l,ae as n}from"./chunks/framework.Dh1jimFm.js";const g=JSON.parse('{"title":"week6 - 脚手架项目和组件初始化开发","description":"","frontmatter":{},"headers":[],"relativePath":"article/架构师课程/week6-笔记.md","filePath":"article/架构师课程/week6-笔记.md","lastUpdated":1743862747000}'),h={name:"article/架构师课程/week6-笔记.md"};function e(t,s,p,k,E,r){return l(),a("div",null,s[0]||(s[0]=[n(`<p>[TOC]</p><h1 id="week6-脚手架项目和组件初始化开发" tabindex="-1">week6 - 脚手架项目和组件初始化开发 <a class="header-anchor" href="#week6-脚手架项目和组件初始化开发" aria-label="Permalink to &quot;week6 - 脚手架项目和组件初始化开发&quot;">​</a></h1><h2 id="_01-本周导学" tabindex="-1">01-本周导学 <a class="header-anchor" href="#_01-本周导学" aria-label="Permalink to &quot;01-本周导学&quot;">​</a></h2><h3 id="将收获什么" tabindex="-1">将收获什么 <a class="header-anchor" href="#将收获什么" aria-label="Permalink to &quot;将收获什么&quot;">​</a></h3><ul><li>ejs模板渲染</li><li>glob文件筛选</li><li>项目标准安装和自定义安装</li><li>组件库初始化和安装</li></ul><h3 id="主要内容" tabindex="-1">主要内容 <a class="header-anchor" href="#主要内容" aria-label="Permalink to &quot;主要内容&quot;">​</a></h3><ul><li>脚手架安装模板功能架构设计</li><li>脚手架模板安装核心实现：ejs库功能详解</li><li>脚手架项目模板安装功能开发</li><li>组件模板开发及脚手架组件初始化功能支持</li><li>脚手架自定义初始化项目模板功能开发</li></ul><h3 id="附赠内容" tabindex="-1">附赠内容 <a class="header-anchor" href="#附赠内容" aria-label="Permalink to &quot;附赠内容&quot;">​</a></h3><ul><li>本周加餐：ejs库源码解析——彻底搞懂模板动态渲染原理</li><li>本阶段加餐：Node.js require源码解析——彻底搞懂npm模块加载原理</li></ul><h3 id="关键词" tabindex="-1">关键词 <a class="header-anchor" href="#关键词" aria-label="Permalink to &quot;关键词&quot;">​</a></h3><ul><li>ejs</li><li>glob</li></ul><h3 id="学习方法" tabindex="-1">学习方法 <a class="header-anchor" href="#学习方法" aria-label="Permalink to &quot;学习方法&quot;">​</a></h3><ul><li>实践再实践</li></ul><h3 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h3><ul><li>知其然知其所以然</li><li>注重学习方法的总结</li><li>做好阶段总结</li></ul><h3 id="本周作业" tabindex="-1">本周作业 <a class="header-anchor" href="#本周作业" aria-label="Permalink to &quot;本周作业&quot;">​</a></h3><ul><li>完成脚手架创建项目和组件流程开发</li><li>进阶： <ul><li>分享ejs和require源码学习过程和感悟</li></ul></li></ul><h2 id="_02-脚手架安装模板功能架构设计" tabindex="-1">02-脚手架安装模板功能架构设计 <a class="header-anchor" href="#_02-脚手架安装模板功能架构设计" aria-label="Permalink to &quot;02-脚手架安装模板功能架构设计&quot;">​</a></h2><p><img src="https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6-%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%AE%89%E8%A3%85%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.jpeg" alt=""></p><h2 id="_03-ejs和glob用法详解" tabindex="-1">03-ejs和glob用法详解 <a class="header-anchor" href="#_03-ejs和glob用法详解" aria-label="Permalink to &quot;03-ejs和glob用法详解&quot;">​</a></h2><h3 id="ejs用法" tabindex="-1">ejs用法 <a class="header-anchor" href="#ejs用法" aria-label="Permalink to &quot;ejs用法&quot;">​</a></h3><h4 id="ejs模板的三种用法" tabindex="-1">ejs模板的三种用法 <a class="header-anchor" href="#ejs模板的三种用法" aria-label="Permalink to &quot;ejs模板的三种用法&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ejs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(str, options);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; 输出渲染后的 HTML 字符串</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(str, data, options);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; 输出渲染后的 HTML 字符串</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">renderFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filename, data, options, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // str =&gt; 输出渲染后的 HTML 字符串</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">代码块12345678910</span></span></code></pre></div><h4 id="标签含义" tabindex="-1">标签含义 <a class="header-anchor" href="#标签含义" aria-label="Permalink to &quot;标签含义&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;脚本&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 标签，用于流程控制，无输出。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_ 删除其前面的空格符</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 输出数据到模板（输出是转义 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 标签）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 输出非转义的数据到模板</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 注释标签，不执行、不输出内容</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 输出字符串 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;%&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 一般结束标签</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-%&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 删除紧随其后的换行符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 将结束标签后面的空格符删除</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">代码块123456789</span></span></code></pre></div><h4 id="包含" tabindex="-1">包含 <a class="header-anchor" href="#包含" aria-label="Permalink to &quot;包含&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;header&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { header: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;header&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }); </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-%&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Title</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  My page</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;%-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;footer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { footer: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;footer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }); </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-%&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">代码块12345678</span></span></code></pre></div><h4 id="自定义分隔符" tabindex="-1">自定义分隔符 <a class="header-anchor" href="#自定义分隔符" aria-label="Permalink to &quot;自定义分隔符&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ejs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ejs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;geddy&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;neil&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alex&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 单个模板文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;?= users.join(&quot; | &quot;); ?&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {users: users},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {delimiter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; &#39;geddy | neil | alex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 全局</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.delimiter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;$&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;$= users.join(&quot; | &quot;); $&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {users: users});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; &#39;geddy | neil | alex&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">代码块123456789101112</span></span></code></pre></div><h4 id="自定义文件加载器" tabindex="-1">自定义文件加载器 <a class="header-anchor" href="#自定义文件加载器" aria-label="Permalink to &quot;自定义文件加载器&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ejs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ejs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myFileLoader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;myFileLoader: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ejs.fileLoader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myFileLoad;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">代码块123456</span></span></code></pre></div><h3 id="glob用法" tabindex="-1">glob用法 <a class="header-anchor" href="#glob用法" aria-label="Permalink to &quot;glob用法&quot;">​</a></h3><h4 id="glob简介" tabindex="-1">glob简介 <a class="header-anchor" href="#glob简介" aria-label="Permalink to &quot;glob简介&quot;">​</a></h4><p>参考慕课手记：<a href="https://www.imooc.com/article/4053" target="_blank" rel="noreferrer">https://www.imooc.com/article/4053</a></p><h4 id="glob用法-1" tabindex="-1">glob用法 <a class="header-anchor" href="#glob用法-1" aria-label="Permalink to &quot;glob用法&quot;">​</a></h4><p>参考npm仓库：<a href="https://www.npmjs.com/package/glob" target="_blank" rel="noreferrer">https://www.npmjs.com/package/glob</a></p>`,36)]))}const o=i(h,[["render",e]]);export{g as __pageData,o as default};
